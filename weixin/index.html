<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <title>微信</title>
    <link href="css/mui.min.css" rel="stylesheet"/>
    <link href="css/main.css" rel="stylesheet"/>
</head>
<body>
	
	<header class="mui-bar mui-bar-nav">
	    <h1 class="mui-title">微信</h1>
	</header> 
	
	<nav class="mui-bar mui-bar-tab">
	    <a class="mui-tab-item mui-active" href="pages/sub1.html">
	        <span class="mui-icon mui-icon-weixin"></span>
	        <span class="mui-tab-label">微信</span>
	    </a>
	    <a class="mui-tab-item" href="pages/sub2.html">
	        <span class="mui-icon mui-icon-contact"></span>
	        <span class="mui-tab-label">通讯录</span>
	    </a>
	    <a class="mui-tab-item" href="pages/sub3.html">
	        <span class="mui-icon mui-icon-paperplane"></span>
	        <span class="mui-tab-label">发现</span>
	    </a>
	    <a class="mui-tab-item" href="pages/sub4.html">
	        <span class="mui-icon mui-icon-person"></span>
	        <span class="mui-tab-label">我的</span>
	    </a>
	</nav>
	
	
	
	<!--<div id="refreshContainer" class="mui-content mui-scroll-wrapper">
		<div class="mui-scroll">
		</div>
	</div>-->
	
	<div class="mui-content">
		<!--使用dom跳转页面，sub1应该对应a标签href的#sub1-->
	    <div class="mui-control-content" id="sub1">
	    	<ul class="mui-table-view">
	    	    <li class="mui-table-view-cell mui-media">
	    	        <a href="javascript:;">
	    	            <img class="mui-media-object mui-pull-left" src="imgs/1.jpg">
	    	            <div class="mui-media-body">
	    	                幸福
	    	                <p class="mui-ellipsis">能和心爱的人一起睡觉，是件幸福的事情；可是，打呼噜怎么办？</p>
	    	            </div>
	    	        </a>
	    	    </li>
	    	    <li class="mui-table-view-cell mui-media">
	    	        <a href="javascript:;">
	    	            <img class="mui-media-object mui-pull-left" src="imgs/2.jpg">
	    	            <div class="mui-media-body">
	    	                木屋
	    	                <p class="mui-ellipsis">想要这样一间小木屋，夏天挫冰吃瓜，冬天围炉取暖.</p>
	    	            </div>
	    	        </a>
	    	    </li>
	    	    <li class="mui-table-view-cell mui-media">
	    	        <a href="javascript:;">
	    	            <img class="mui-media-object mui-pull-left" src="imgs/3.jpg">
	    	            <div class="mui-media-body">
	    	                CBD
	    	                <p class="mui-ellipsis">烤炉模式的城，到黄昏，如同打翻的调色盘一般.</p>
	    	            </div>
	    	        </a>
	    	    </li>
	    	</ul>
	    </div>
	    
	    <div class="mui-control-content" id="sub2">11111</div>
	    
	</div>
	

	<script src="js/mui.min.js"></script>
    <script type="text/javascript"> 
    	mui.init();
    	
    	//连续两次按下退出应用
    	var first = null;
    	mui.back = function(){
    		if(!first){
				first = new Date().getTime();
				mui.toast('再按一次退出应用');
				setTimeout(function(){
					first = null;
				},1000);
    		}else{
    			if(new Date().getTime() - first < 1000){
    				plus.runtime.quit(); //退出客户端程序
    			} 
    		}
    	};
    	
    	//跳转页面
    	var subPages = ['pages/sub1.html','pages/sub2.html','pages/sub3.html','pages/sub4.html'];
    	var subPageStyle = {
    		top: '44px',
    		bottom: '50px'
    	};
    	//窗体管理
    	mui.plusReady(function(){
    		var self = plus.webview.currentWebview(); //获取当前的窗体
    		//console.log(self.getURL());
    		for(var i=0;i<subPages.length;i++){
    			var sub = plus.webview.create(subPages[i],subPages[i],subPageStyle); //创建窗体
    			sub.hide(); //所有窗体都隐藏
    			self.append(sub); //把窗体追加到self中
    		}
    		plus.webview.show(subPages[0]); //显示subPages[0]的窗体
    	});
    	//点击底部导航跳转页面
    	mui('.mui-bar-tab').on('tap','a',function(){
    		var tagPage = this.getAttribute('href');
    		plus.webview.show(tagPage,"fade-in",200);
    	});
    	
    	//下拉加载
    	mui.init({
      		pullRefresh: {
      			container: "#refreshContainer",
      			down: {
      				style: 'circle',
      				color: '#2BD009', 
      				height: '50px',
      				range: '100px',
      				offset: '0px',
      				//auto: true,
      				callback : function(){}
      			}
      		}
      });
    	
    	//ajax
    	/*mui.ajax('http://www.mjpai.cn:3100/api/users/code',{
    		data: {},
    		dataType: 'json', //服务器返回json格式数据
    		//jsonp: 'jsoncallback',
    		type: 'GET', //http请求类型
    		timeout: 10000, //超时时间设置为10秒
    		async: true, //true：异步，false：同步
    		crossDomain: true, //强制使用5+跨域
    		headers: {'Content-Type': 'application/json'},
    		//data：服务器返回的响应数据，类型可以是json对象，xml对象，字符串等。textStatus：状态描述，默认值为success。xhr：xhr实例对象
    		success: function(data,textStatus,xhr){
    			console.log(xhr);
    		},
    		//xhr：xhr实例对象，type：错误描述，可取值：timeout，error，parsererror，null，errorThrown：可捕获的异常对象
    		error: function(xhr,type,errorThrown){ 
    			console.log(type); 
    		}
    	});*/
    	
    </script>
    
</body>
</html>